/* ———————————————————————————————————————————————————————————————————————————— */
/* 修复分割线块标不对齐的问题（margin分配错误） */
.orca-repr-hr-content hr {
    --hr-height: 2px;
    height: var(--hr-height);
    margin: calc(.5 * (var(--orca-block-line-height) - var(--hr-height) - 2 * var(--orca-spacing-md))) 0;
}

/* ———————————————————————————————————————————————————————————————————————————— */
/* 修复大块折叠按钮hover时的抖动 */
.orca-no-editable-container>.orca-no-editable-btn.orca-button {
    border: 0 !important;
}

/* ———————————————————————————————————————————————————————————————————————————— */
/* 修复折叠按钮不对齐的问题(orca忽视了padding */
.orca-block-folding-handle {
    top: calc((var(--orca-block-line-height) - var(--orca-spacing-sm) * 2 - var(--orca-fontsize-sm)) * .5)
}

/* ———————————————————————————————————————————————————————————————————————————— */
/* 修复Windows自定义图标错位的问题 */
.orca-block-handle[data-icon]:not(:hover) {
    width: 1rem;
    display: inline-flex;
    justify-content: center;
}

/* ———————————————————————————————————————————————————————————————————————————— */
/* 【强迫症】缩进线向上延长一点，使得单个子块时长度上下对齐 */
.orca-repr-scope-line {
    top: calc(var(--orca-block-line-height) + .6em);
}

/* ———————————————————————————————————————————————————————————————————————————— */
/* 【强迫症】自折叠边距微调，不需要上边距 因为非折叠也没有 */
.orca-repr-self-fold-container {
    margin-top: 0;
}

/* ———————————————————————————————————————————————————————————————————————————— */
/* 修复，消除list查询中，单块长文条目对条目间距的影响 */
/* 1、如果后面没有块了，才不需要mb */
/* 2、没有块的同时，还得没有child，或者 */
.orca-long-form:last-child>.orca-repr>.orca-repr-main {
    &:not(:has(+.orca-repr-children)):after {
        margin-bottom: 0;
    }

    &:has(+.orca-repr-children:empty):after {
        margin-bottom: 0;
    }
}


/* 卡片视图左侧额外 .25rem 使得icon左右留白一致 */
.orca-query-card>.orca-block {
    margin-left: calc(var(--orca-spacing-xl) + .25rem);
}


/* ———————————————————————————————————————————————————————————————————————————— */
/* 链接编辑窗口的输入框需要100% */
.orca-inline-link-edit-input>input {
    width: 100%;
}


/* ———————————————————————————————————————————————————————————————————————————— */
/* 优化模态窗中的边距，顺便解决模态窗中的艾特弹出窗编辑器padding被覆盖的问题 */
.orca-inline-reference-preview>.orca-block-editor {
    padding: var(--orca-spacing-md) 1.5rem var(--orca-spacing-md) 1.75rem;
}


/* ———————————————————————————————————————————————————————————————————————————— */
/* 清除艾特弹出窗的editor-main的pb，否则会有本不该出现的垂直滚动条 */
#main .orca-popup .orca-inline-reference-preview>.orca-block-editor>.orca-block-editor-main {
    padding-bottom: 0;
}


/* ———————————————————————————————————————————————————————————————————————————— */
/* 提高图片尺寸调节按钮的层叠级别，以避免扁长图不方便调节尺寸的问题（被工具栏遮挡） */
.orca-image-resizer {
    z-index: var(--orca-zindex-decorator);
}

.orca-image-wrapper:hover .orca-image-resizer:before {
    top: 25%;
    bottom: 25%;
}


/* ———————————————————————————————————————————————————————————————————————————— */
/* 表格视图如果只有一列，则显示满 */
.orca-query-table-table:has(.orca-table-header-cell:last-child:first-child) {
    grid-template-columns: 100% !important;

    & .orca-query-table-cell {
        border-right: 0;
    }

    & .orca-table-header-cell {
        border-right: 0;
    }
}

/* ———————————————————————————————————————————————————————————————————————————— */
/* 优化不可编辑块的按钮位置，单位em可以在预览窗口也有不错的体验 */
.orca-no-editable-btn.orca-button.orca-insert-top {
    left: 2.25em;
}

.orca-no-editable-btn.orca-button.orca-fold {
    left: 4.25em;
}

.orca-no-editable-btn.orca-button.orca-insert-bottom {
    right: 2.25em;
}

/* ———————————————————————————————————————————————————————————————————————————— */
/* 列表视图，优化无面包屑时的单元格上边距（补齐main:after） */
.orca-query-table-row:not(.orca-query-table-row-add,.orca-query-table-row-stats) .orca-query-table-cell:not(:has(>.orca-query-card-breadcrumb)){
    padding-top:calc(var(--orca-spacing-sm) + .35em);
}

/* 列表视图垂直滚动条不应该存在 */
.orca-query-table-table {
    overflow-y: hidden;
}