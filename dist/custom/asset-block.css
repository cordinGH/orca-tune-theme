@media (prefers-color-scheme: dark) {
    :root {
        --my-shadow-img: 0 0 5px #333;
    }
}

@media (prefers-color-scheme: light) {
    :root {
        --my-shadow-img: 0 0 5px #ccc;
    }
}

/* 
    ————————————————————————————————————————————————————————————————————
    图片块提供轻微边界阴影。不会包含图片描述
    视频块同理。同时视频默认居中。
    ————————————————————————————————————————————————————————————————————
*/
#custom-theme-body {
    .orca-image-wrapper {
        padding: 5px;

        &>img {
            box-shadow: var(--my-shadow-img);
            border-radius: 3px;
        }
    }

    /* 移除上下边距，影响观感 */
    .orca-repr-image-content>.orca-no-editable-container:not(:has(.orca-repr-self-fold-container)) {
        padding: var(--orca-spacing-sm) 0;
    }

    .orca-image-caption {
        margin-top: var(--orca-spacing-sm);
    }

    .orca-video {
        margin: 0 auto;
        display: block;
    }

    .orca-repr-video-content div:has(>.orca-video) {
        box-shadow: var(--my-shadow-img);
        border-radius: 3px;
    }

    .orca-video-caption {
        margin: var(--orca-spacing-sm);
    }

    .orca-video-toolbar>.orca-select-button {
        white-space: nowrap;
    }
}


/* 图文环绕 */
/* 使用说明：图文环绕是虎鲸中的标签名，当图片块打上该标签后，子块会以图文环绕的形式呈现 */
.orca-repr-image:has(>.orca-repr-main [data-name="图文环绕"]) {
    display: flow-root;

    /* em是为了适配悬浮预览 */
    &>.orca-repr-main {
        float: left;
        margin-right: 1em;
    }

    /* ----------------------------------------------------- */
    /* 约束子块集合的起始位置，再令子块左移一次父块缩进，即可使得子块的main的起始缩进变为1 */
    &>.orca-repr-children {
        margin-left: calc(var(--orca-block-indent) * var(--orca-spacing-indent));
        padding-top: var(--orca-spacing-md);
    }

    &>.orca-repr-children>* {
        display: flow-root;
        translate: calc(-1 * (var(--orca-block-indent) - 1) * var(--orca-spacing-indent));
    }

    /* 追加一次translate所需的内容空间 */
    width:calc(100% + calc(var(--orca-block-indent) * var(--orca-spacing-indent)));
    
    /* ----------------------------------------------------- */ 
    /* 让图片内容层叠级别上去，不被子块遮挡 */
    &>.orca-repr-main>.orca-repr-image-content>:is(.orca-no-editable-container, .orca-tags) {
        z-index: 1;
        position: relative;
    }

    /* ----------------------------------------------------- */ 
    /* 约束尺寸调节体验 */
    
    /* 最小图片尺寸，和图文环绕标签差不多长 */
    --min-width-img: 6.5em;

    &>.orca-repr-main{
        /* 先消去为了translate而扩充的宽度 */
        max-width: max(calc(100% - var(--orca-block-indent) * var(--orca-spacing-indent) - 15em), var(--min-width-img));

        & .orca-tag{
            white-space:nowrap;
        }
    }
    &>.orca-repr-main .orca-image-wrapper {
        /* 和图文环绕标签差不多长 */
        min-width: var(--min-width-img);
    }

    &>.orca-repr-main .orca-image-image {
        min-width: 100%;
    }
}